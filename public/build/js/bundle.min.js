function mostrar_menu(){nav.style.right="0px",background_menu.style.display="block"}function ocultar_menu(){nav.style.right="-250px",background_menu.style.display="none"}if($(document).ready((function(){document.querySelector(".typing-area5").onsubmit=e=>{e.preventDefault()};document.querySelector(".typ2").onsubmit=e=>{e.preventDefault()},$("#btn_chat5").on("click",(function(){$value=$("#data").val(),$msg='<div class="user-inbox inbox"><div class="msg-header"><p>'+$value+"</p></div></div>",$(".chatbot_text").append($msg),$("#data").val(""),$.ajax({url:location.origin+"/chatbot",type:"POST",data:"text="+$value,success:function(e){$replay='<div class="bot-inbox inbox"><div class="icon"><i class="fas fa-user"></i></div><div class="msg-header"><p>'+e+"</p></div></div>",$(".chatbot_text").append($replay),$(".chatbot_text").scrollTop($(".chatbot_text")[0].scrollHeight)}})})),$("#btn_chat6").on("click",(function(){$value=$("#data2").val(),$msg='<div class="user-inbox inbox"><div class="msg-header"><p>'+$value+"</p></div></div>",$(".chat_2").append($msg),$("#data2").val(""),$.ajax({url:location.origin+"/chatbot",type:"POST",data:"text="+$value,success:function(e){$replay='<div class="bot-inbox inbox"><div class="icon"><i class="fas fa-user"></i></div><div class="msg-header"><p>'+e+"</p></div></div>",$(".chat_2").append($replay),$(".chat_2").scrollTop($(".chat_2")[0].scrollHeight)}})}))})),document.getElementById("btn_menu").addEventListener("click",mostrar_menu),document.getElementById("back_menu").addEventListener("click",ocultar_menu),nav=document.getElementById("nav"),background_menu=document.getElementById("back_menu"),document.getElementById("file-label")){const e=document.getElementById("imagen_reserva"),t=document.getElementById("file-label");console.log("prueba emi"),e.addEventListener("change",(function(){e.files.length>0?(t.textContent=e.files[0].name,console.log(e.files[0].name)):t.textContent="Subir Imagen"}))}if(document.querySelector(".typing-area")){const e=document.querySelector(".typing-area"),t=e.querySelector(".incoming_id").value,a=e.querySelector(".input-field"),n=e.querySelector("button"),o=document.querySelector(".chat-box");function scrollToBottom(){o.scrollTop=o.scrollHeight}e.onsubmit=e=>{e.preventDefault()},a.focus(),a.onkeyup=()=>{""!=a.value?n.classList.add("active"):n.classList.remove("active")},n.onclick=()=>{let t=new XMLHttpRequest;t.open("POST","/chat",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(a.value="",scrollToBottom())};let n=new FormData(e);t.send(n)},o.onmouseenter=()=>{o.classList.add("active")},o.onmouseleave=()=>{o.classList.remove("active")},setInterval(()=>{let e=new XMLHttpRequest;e.open("POST","/actualizar-chat",!0),e.onload=()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){let t=e.response;o.innerHTML=t,o.classList.contains("active")||scrollToBottom()}},e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("usuarios_id="+t)},500)}if(document.querySelector(".typing-area2")){const e=document.querySelector(".typing-area2"),t=e.querySelector(".incoming_id2").value,a=e.querySelector(".input-field3"),n=e.querySelector("button"),o=document.querySelector(".chat-box3");function scrollToBottom(){o.scrollTop=o.scrollHeight}e.onsubmit=e=>{e.preventDefault()},a.focus(),a.onkeyup=()=>{""!=a.value?n.classList.add("active"):n.classList.remove("active")},n.onclick=()=>{let t=new XMLHttpRequest;t.open("POST","/chat2",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(a.value="",scrollToBottom())};let n=new FormData(e);t.send(n)},o.onmouseenter=()=>{o.classList.add("active")},o.onmouseleave=()=>{o.classList.remove("active")},setInterval(()=>{let e=new XMLHttpRequest;e.open("POST","/actualizarChatServidor",!0),e.onload=()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){let t=e.response;o.innerHTML=t,o.classList.contains("active")||scrollToBottom()}},e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("usuarios_id="+t)},500)}if(document.querySelector(".usuarios_mostrar")){const e=document.querySelector(".usuarios_mostrar"),t=document.querySelector(".incoming_id4").value;function scrollToBottom(){e.scrollTop=e.scrollHeight}setInterval(()=>{let a=new XMLHttpRequest;a.open("POST","/responder",!0),a.onload=()=>{if(a.readyState===XMLHttpRequest.DONE&&200===a.status){let t=a.response;e.innerHTML=t,e.classList.contains("active")||scrollToBottom()}},a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send("usuarios_id="+t)},500)}if(document.querySelector(".nav_menu_bg")){const e=document.querySelector(".nav_menu_bg");document.querySelector("#menu_usuario").addEventListener("click",()=>{e.classList.toggle("active_menu")})}if(document.querySelector(".formulario_usuario_act")){const e=document.querySelector(".formulario_usuario_act"),t=(e.querySelector(".id_usuario_act").value,e.querySelector("#nombre_id"),e.querySelector("#fecha_id"),e.querySelector("#apellido_id"),e.querySelector("#sexo_id"),e.querySelector("#identificacion_id"),e.querySelector("#nro_telefono_id"),e.querySelector("#countries-list"),e.querySelector("#estado_id"),e.querySelector("#ciudad_id"),e.querySelector("#direccion_id"),e.querySelector("#c_postal_id"),e.querySelector("#email_id"),e.querySelector("#contarsenia_id"),e.querySelector("button"));e.onsubmit=e=>{e.preventDefault()},t.onclick=()=>{let t=new XMLHttpRequest;t.open("POST","/actualizar-usuario",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status?Swal.fire({position:"top-end",icon:"success",title:"Sus datos han sido actualizados con exito",showConfirmButton:!1,timer:1500}).then(()=>{setTimeout(()=>{window.location.reload()},2e3)}):Swal.fire({icon:"info",title:"Revise su conexion a internet",text:"No se actualizaron sus datos, por favor, intente mas tarde."}))};let a=new FormData(e);t.send(a)}}if(document.querySelectorAll(".form_reservas")){document.querySelectorAll(".form_recibida_reserva").forEach((function(e){e.querySelector("input").value;let t=e.querySelector(".boton-rojo-block_reservas");e.onsubmit=e=>{e.preventDefault()},t.onclick=()=>{let t=new XMLHttpRequest;t.open("POST","/reserva/recibida",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status?Swal.fire({position:"top-end",icon:"success",title:"La reserva ha sido marcada como recibida",showConfirmButton:!1,timer:1500}).then(()=>{setTimeout(()=>{window.location.reload()},2e3)}):Swal.fire({icon:"info",title:"Revise su conexion a internet",text:"No se pudo cambiar el estado de la reserva, por favor, intente mas tarde."}))};let a=new FormData(e);t.send(a)}}))}if(document.querySelector("#bela_ia")){const e=document.querySelector("#bela_ia"),t=document.querySelector("#rose_ia"),a=document.querySelector(".elegir_chatbot"),n=document.querySelector(".part_chatbot_ia"),o=document.querySelector(".part_chatbot_ia2"),i=document.querySelector("#chat_display"),c=document.querySelector("#chat_display2");e.addEventListener("click",(function(){a.classList.add("ocultar_elegir"),n.classList.add("activar_chat"),i.classList.add("activar_chat")})),t.addEventListener("click",(function(){a.classList.add("ocultar_elegir"),o.classList.add("activar_chat"),c.classList.add("activar_chat")}))}if(document.querySelector(".comentarios")){const e=document.querySelector(".form_comentario"),t=e.querySelector("#centros_consumo_id").value,a=e.querySelector(".mensaje_comentario"),n=document.querySelector(".comentarios"),o=e.querySelector("button");function scrollToBottom(){n.scrollTop=n.scrollHeight}e.onsubmit=e=>{e.preventDefault()},a.focus(),a.onkeyup=()=>{""!=a.value?o.classList.add("active"):o.classList.remove("active")},o.onclick=()=>{let t=new XMLHttpRequest;t.open("POST","/crear-comentario",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(a.value="",scrollToBottom())};let n=new FormData(e);t.send(n)},n.onmouseenter=()=>{n.classList.add("active")},n.onmouseleave=()=>{n.classList.remove("active")},setInterval(()=>{let e=new XMLHttpRequest;e.open("POST","/actualizar-comentarios",!0),e.onload=()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){let t=e.response;n.innerHTML=t,n.classList.contains("active")||scrollToBottom()}},e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("centros_consumo_id="+t)},500)}if(document.querySelector(".form_eliminar_reserva")){const e=document.querySelector(".form_eliminar_reserva"),t=(e.querySelector("#id_reserva2").value,e.querySelector("button"));e.onsubmit=e=>{e.preventDefault()},t.onclick=()=>{Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});Swal.fire({title:"¿Estas seguro de eliminar la reserva?",text:"No podras revertir esto",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar.",cancelButtonText:"No, mejor no",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",reverseButtons:!0}).then(t=>{if(t.isConfirmed){let t=new XMLHttpRequest;t.open("POST","/cancelar_reserva",!0),t.onload=()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status?Swal.fire({position:"top-end",icon:"success",title:"La reserva ha sido eliminada con exito",showConfirmButton:!1,timer:1500}).then(()=>{setTimeout(()=>{window.location.reload()},2e3)}):Swal.fire({icon:"info",title:"Revise su conexion a internet",text:"No se elimino la reserva. Por favor, intente mas tarde."}))};let a=new FormData(e);t.send(a)}else t.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"Operacion cancelada",text:"Su reserva no ha sido cancelada",icon:"error"})})}}AOS.init(),document.getElementById("countries-list")&&fetch("https://restcountries.com/v2/all").then(e=>e.json()).then(e=>{const t=document.getElementById("countries-list");e.forEach(e=>{const a=document.createElement("option");a.textContent=e.name,t.appendChild(a)})});let paso=1;const pasoInicial=1,pasoFinal=3,reserva={id:"",fecha_i:"",fecha_e:"",solicitudes:"",monto:"",ninos:"",adultos:"",cantidad:"",opcion_pago:"",hora_ll:"",codigo:"",habitaciones:[],habitaciones_re:[],status:2,imagen:"",traslado:""},re_habitacion={id:"",id_reserva:"",id_habitacion:"",cantidad_d:0,cantidad_s:0},reserva_cant={mostrar:0,cant:0};if(document.getElementById("fechaReserva2")){const e=document.getElementById("fechaReserva2"),t=document.getElementById("fechaEgreso2");e.addEventListener("input",(function(){const a=new Date(e.value),n=new Date(a);n.setDate(a.getDate()+1);const o=n.toISOString().split("T")[0];t.value=o,t.min=o}))}if(document.querySelector("#fechaReserva2")){const e=document.querySelector("#fechaReserva2"),t=document.querySelector("#fechaEgreso2");e.min=(new Date).toISOString().split("T")[0],t.min=e.value,e.addEventListener("input",(function(){t.min=e.value}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("chatbot"),t=document.getElementById("abrirChatbot");if(document.querySelector(".cerrar_chatbot")){document.querySelector(".cerrar_chatbot").addEventListener("click",(function(){e.classList.add("cerrado"),e.classList.remove("abierto"),t.classList.remove("cerrarbtn_chat")}))}if(t.addEventListener("click",(function(){e.classList.remove("cerrado"),e.classList.add("abierto"),t.classList.add("cerrarbtn_chat")})),eventListeners(),limitarCaracteres(),limitarCaracteres2(),iniciarApp(),document.querySelector("#fechaReserva2")){const e=document.querySelector("#fechaReserva2"),t=document.querySelector("#fechaEgreso2");e.min=(new Date).toISOString().split("T")[0],t.min=e.value,e.addEventListener("input",(function(){t.min=e.value}))}}));var cantidadTotalHabitaciones="";function iniciarApp(){cantidadTotalHabitaciones="",consultarApi(),seleccionarSolicitudes(),seleccionarHora(),seleccionarPago(),mostrarResumen(),idUsuario(),mostrarSeccion(),tabs()}if(document.getElementById("abrir_modal")){let e=document.getElementById("miModal2"),t=(document.getElementById("flex2"),document.getElementById("abrir_modal")),a=document.getElementById("close2"),n=document.getElementById("id_usuario_acti");t.addEventListener("click",(function(){""===n.value?Swal.fire({icon:"info",title:"Inicie sesion",text:"Por favor, iniciar sesion o registrarse para poder habilitar el chat en linea con el hotel"}):(e.style.display="block",e.style.zIndex=5)})),a.addEventListener("click",(function(){e.style.display="none"})),window.addEventListener("click",(function(e){e.target==flex&&(modal.style.display="none")}))}let modal=document.getElementById("miModal"),flex=document.getElementById("flex");if(document.getElementById("close")){document.getElementById("close").addEventListener("click",(function(){modal.style.display="none"}))}async function consultarApi(){try{const e=new URLSearchParams(window.location.search),t=e.get("habitaciones"),a=e.get("ninos"),n=e.get("adultos"),o=e.get("fechaReserva"),i=e.get("fechaEgreso"),c=location.origin+"/api/servicios",s=await fetch(c),r=await s.json();reserva_cant.cant=0,mostrarservicio(r,t,a,n,o,i)}catch(e){console.log(e)}}function mostrarservicio(e,t,a,n,o,i){reserva.fecha_e=i,reserva.fecha_i=o,reserva.cantidad=t,reserva.ninos=a,reserva.adultos=n,console.log(reserva),e.forEach(e=>{const{id:t,imagen:a,nombre:n,descripcion:o,preciocd:i,preciosd:c,adultos:s,ninos:r}=e,l=document.createElement("H5");l.textContent=n;const d=document.createElement("P");d.textContent=o;const u=document.createElement("P");u.textContent=`Hasta ${s} adultos y ${r} niños`;const m=document.createElement("img");m.src="/imagenes_h/"+a;const p=document.createElement("P");p.classList.add("precio-hab"),p.textContent="USD "+i;const v=document.createElement("P");v.textContent="USD "+c;const h=document.createElement("P");h.textContent="Con desayuno";const f=document.createElement("P");f.textContent="Sin desayuno";const g=document.createElement("DIV");g.classList.add("precio_habi"),g.appendChild(h),g.appendChild(p),g.appendChild(f),g.appendChild(v);const _=document.createElement("DIV");_.classList.add("img_hab"),_.appendChild(m);const y=document.createElement("DIV");y.classList.add("descrip_precio");const b=document.createElement("a");b.href="/habitacion?id="+t,b.appendChild(l),b.target="_blank";const S=document.createElement("DIV");S.classList.add("titulo_info"),S.appendChild(b);const E=document.createElement("DIV");E.classList.add("info_adicional"),E.appendChild(u);const L=document.createElement("DIV");L.classList.add("info_parrafo"),L.appendChild(d),y.appendChild(L),y.appendChild(g);const I=document.createElement("DIV");I.classList.add("info_hab_3"),I.appendChild(S),I.appendChild(E),I.appendChild(y);const q=document.createElement("DIV");q.classList.add("info_hab"),q.appendChild(I);const C=document.createElement("DIV");C.classList.add("hab_part2"),C.appendChild(_),C.appendChild(q),C.setAttribute("id","abrir"+t),C.dataset.idServicio=t,C.onclick=function(){seleccionarHabitacion2(e)},document.querySelector("#habitaciones").appendChild(C)});const c=document.createElement("DIV");c.classList.add("fecha_re");const s=document.createElement("DIV");s.classList.add("datos_seleccion_basic");const r=document.createElement("input");r.type="date",r.value=reserva.fecha_i,r.addEventListener("input",(function(){reserva.fecha_i=r.value}));const l=document.createElement("P");l.classList.add("fecha_reserva_p"),l.textContent="Check-in";const d=document.createElement("DIV");d.classList.add("fecha_re");const u=document.createElement("input");u.type="date",u.value=reserva.fecha_e,u.addEventListener("input",(function(){reserva.fecha_e=u.value}));const m=document.createElement("P");m.classList.add("fecha_reserva_p"),m.textContent="Check-out";const p=document.querySelector("#ninos");p.value=reserva.ninos,p.addEventListener("input",(function(){reserva.ninos=p.value}));const v=document.querySelector("#adultos");v.value=reserva.adultos,v.addEventListener("input",(function(){reserva.adultos=v.value}));const h=document.querySelector("#habitaciones2");h.value=reserva.cantidad,h.addEventListener("input",(function(){reserva.cantidad=h.value}));const f=document.createElement("BR");f.classList.add("br"),c.appendChild(l),c.appendChild(r),d.appendChild(m),d.appendChild(u),s.appendChild(c),s.appendChild(f),s.appendChild(d),document.querySelector("#datos_seleccion").appendChild(s)}function seleccionarHabitacion2(e){const{id:t}=e,{nombre:a}=e,{habitaciones:n,cantidad:o}=reserva;indexprueba=reserva.habitaciones_re.findIndex(e=>e.id_habitacion===t);const i={id_reserva:"",id_habitacion:t,cantidad_d:0,cantidad_s:0},c=document.getElementById("modal-body");c.innerHTML="";let s=0;s=reserva.cantidad;let r=document.createElement("p");r.textContent="Habitaciones con desayuno incluido:";let l=document.createElement("input");l.setAttribute("id","cant_desayuno"),l.type="text",l.value=0,l.disabled=!0;let d=document.createElement("button");d.type="button",d.classList.add("counter-btn"),d.setAttribute("onclick","incrementar3('cant_desayuno')"),d.textContent="+";let u=document.createElement("button");u.type="button",u.classList.add("counter-btn"),u.setAttribute("onclick","decrementar3('cant_desayuno')"),u.textContent="-",l.addEventListener("change",(function(){i.cantidad_d=parseInt(l.value)||0}));let m=document.createElement("button");m.type="button",m.classList.add("counter-btn"),m.setAttribute("onclick","incrementar3('cant_sdesayuno')"),m.textContent="+";let p=document.createElement("p");p.textContent="Habitaciones sin desayuno";let v=document.createElement("input");v.type="text",v.setAttribute("id","cant_sdesayuno"),v.value=0,v.disabled=!0;let h=document.createElement("button");h.type="button",h.classList.add("counter-btn"),h.setAttribute("onclick","decrementar3('cant_sdesayuno')"),h.textContent="-",v.addEventListener("change",(function(){i.cantidad_s=parseInt(v.value)||0}));const f=document.createElement("DIV");f.classList.add("seleccionar_hab_p"),f.textContent="Seleccionar";const g=document.createElement("DIV");g.classList.add("seleccionar_numeros"),g.appendChild(d),g.appendChild(l),g.appendChild(u);const _=document.createElement("DIV");_.classList.add("seleccionar_numeros"),_.appendChild(m),_.appendChild(v),_.appendChild(h),c.appendChild(r),c.appendChild(g),c.appendChild(p),c.appendChild(_),c.appendChild(f);document.getElementById("abrir"+t);modal.style.display="block",f.onclick=function(){i.cantidad_s=parseInt(v.value),i.cantidad_d=parseInt(l.value);reserva.habitaciones.findIndex(e=>e.id===t);seleccionarHabitacion(e,i)}}function validarCantidad(){let e=0;return e=reserva.cantidad,!(reserva_cant.cant>parseInt(e))}function validarCantidadTotal(e,t){let a=0;a=reserva.cantidad,console.log("la cantidad actual: "+reserva_cant.cant),2===t&&(reserva_cant.cant-=e),reserva_cant.cant>parseInt(a)?(Swal.fire({icon:"info",title:"Revise las cantidad",text:"Esta introduciendo mas habitaciones de las que indico, por favor, modifiquelo si desea mas"}),reserva_cant.cant-=e):reserva_cant.cant===parseInt(a)&&(Swal.fire({position:"top-end",icon:"success",title:"Las habitaciones han sido guardadas",showConfirmButton:!1,timer:1500}),modal.style.display="none",paso=2,mostrarSeccion()),reserva_cant.cant<0&&(reserva_cant.cant=0,console.log("la cantidad actual PERO AHORA: "+reserva_cant.cant))}function seleccionarHabitacion(e,t){const{id:a}=e;let n=0,o=0;const{nombre:i}=e,{habitaciones:c,habitaciones_re:s}=reserva,r=document.querySelector(`[data-id-servicio="${a}"]`);if(c.some(e=>e.id===a)){n=0;let e=0;e=reserva.habitaciones_re.findIndex(e=>e.id_habitacion===a),console.log("index: "+e),-1!==e&&(console.log(s[e]),0===reserva.habitaciones_re[e].cantidad_s&&0!==reserva.habitaciones_re[e].cantidad_d?(console.log("if1"),reserva_cant.cant=reserva_cant.cant-s[e].cantidad_d):0!==reserva.habitaciones_re[e].cantidad_s&&0===reserva.habitaciones_re[e].cantidad_d?(console.log("if2"),reserva_cant.cant-=parseInt(reserva.habitaciones_re[e].cantidad_s)):0!==reserva.habitaciones_re[e].cantidad_s&&0!==reserva.habitaciones_re[e].cantidad_d?(console.log("if3"),reserva_cant.cant-=parseInt(reserva.habitaciones_re[e].cantidad_s)+parseInt(reserva.habitaciones_re[e].cantidad_d)):console.log("no entraron a los ifs: "+reserva.habitaciones_re[e].cantidad_s+reserva.habitaciones_re[e].cantidad_d)),reserva.habitaciones=c.filter(e=>e.id!==a),reserva.habitaciones_re=s.filter(e=>e.id_habitacion!==a),r.classList.remove("seleccionado")}else n=0,t.cantidad_d&&t.cantidad_s?(n=parseInt(t.cantidad_s)+parseInt(t.cantidad_d),reserva_cant.cant+=parseInt(t.cantidad_s)+parseInt(t.cantidad_d)):t.cantidad_s&&!t.cantidad_d?(n=parseInt(t.cantidad_s),reserva_cant.cant+=parseInt(t.cantidad_s)):!t.cantidad_s&&t.cantidad_d&&(n=parseInt(t.cantidad_d),reserva_cant.cant+=parseInt(t.cantidad_d)),validarCantidad()&&(o=0,console.log("seleccionadoo"),console.log(t.cantidad_s),console.log(t.cantidad_d),console.log("----------------"),0!==t.cantidad_d&&0!==t.cantidad_s&&(reserva.habitaciones=[...c,e],reserva.habitaciones_re=[...s,t],r.classList.add("seleccionado"),console.log("seleccionadoo"),console.log(t.cantidad_s),console.log(t.cantidad_d),console.log("----------------"),o=1),0!==t.cantidad_s&&0===t.cantidad_d&&(reserva.habitaciones=[...c,e],reserva.habitaciones_re=[...s,t],r.classList.add("seleccionado"),console.log("seleccionadoo"),console.log(t.cantidad_s),console.log(t.cantidad_d),console.log("----------------"),o=1),0!==t.cantidad_d&&0===t.cantidad_s&&(reserva.habitaciones=[...c,e],reserva.habitaciones_re=[...s,t],r.classList.add("seleccionado"),console.log("seleccionadoo"),console.log(t.cantidad_s),console.log(t.cantidad_d),console.log("----------------"),o=1),(isNaN(t.cantidad_s)&&isNaN(t.cantidad_d)||0===t.cantidad_s&&0===t.cantidad_d)&&(Swal.fire({icon:"info",title:"Por favor, ingrese una cantidad valida",text:"No puede seleccionar una habitacion hasta indicar cuantas quiere con desayuno o sin desayuno"}),o=2));validarCantidadTotal(n,o),mostrarResumen()}function mostrarSeccion(){let e=document.querySelector(".tabs");3===paso?e.classList.add("esconder_tabs"):e.classList.remove("esconder_tabs");const t=document.querySelector(".mostrar");t&&t.classList.remove("mostrar");const a="#paso-"+paso;document.querySelector(a).classList.add("mostrar");const n=document.querySelector(".actual");n&&n.classList.remove("actual");document.querySelector(`[data-paso="${paso}"]`).classList.add("actual")}function idUsuario(){reserva.id=document.querySelector("#id").value}function seleccionarSolicitudes(){document.querySelector("#solicitudes").addEventListener("change",(function(e){reserva.solicitudes=e.target.value}))}function seleccionarPago(){document.querySelectorAll('input[name="m_pago"]').forEach(e=>{e.addEventListener("input",(function(e){reserva.opcion_pago=e.target.value}))})}function seleccionarHora(){document.querySelector("#hora").addEventListener("input",(function(e){reserva.hora_ll=e.target.value}))}function finalreserva(){}function mostrarResumen(){const e=document.querySelector(".contenido-resumen"),t=document.querySelector(".boton-reserva"),a=document.querySelector(".part_resumen_monto");for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)t.removeChild(t.firstChild);for(;a.firstChild;)a.removeChild(a.firstChild);const{fecha_e:n,fecha_i:o,ninos:i,adultos:c,habitaciones:s,habitaciones_re:r}=reserva;console.log(reserva),reserva.monto=0,s.forEach(t=>{console.log(t);const{id:a,imagen:n,nombre:o,descripcion:i,preciocd:c,preciosd:s,adultos:l,ninos:d}=t,u=document.createElement("DIV");u.classList.add("contenedor-habitacion");const m=document.createElement("P");m.textContent=o;const p=document.createElement("IMG");p.src="/imagenes_h/"+n;document.createElement("P").innerHTML="<span>Precio con desayuno:</span>  USD "+c;document.createElement("P").innerHTML="<span>Precio sin desayuno:</span> USD "+s,u.appendChild(m),u.appendChild(p),r.forEach(e=>{const{id_habitacion:t,cantidad_d:n,cantidad_s:o}=e;if(parseInt(t)===parseInt(a)){if(isNaN(o)||0===o)e.cantidad_s=0;else{const e=document.createElement("P");let t=0;t=o*s,e.innerHTML=`<span>Habitaciones sin desayuno: </span> (${o}). <br> Total: USD ${t} por noche`,u.appendChild(e),reserva.monto=reserva.monto+parseFloat(s)*parseFloat(o)}if(isNaN(n)||0===n)e.cantidad_d=0;else{const e=document.createElement("P");let t=0;t=n*c,e.innerHTML=`<span>Habitaciones con desayuno incluido: </span> (${n}). <br> Total: USD ${t} por noche`,reserva.monto=reserva.monto+parseFloat(c)*parseFloat(n),u.appendChild(e)}}}),e.appendChild(u)});const l=document.createElement("p");l.innerHTML="<span> El monto total es:</span> USD "+reserva.monto;const d=document.createElement("BUTTON");document.createElement("BUTTON");d.classList.add("btn_reservar"),d.textContent="Enviar reserva",d.onclick=reservarHabitacion;const u=new Date(o),m=u.getMonth(),p=u.getDate()+2,v=u.getFullYear(),h=new Date(Date.UTC(v,m,p)).toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),f=new Date(n),g=f.getMonth(),_=f.getDate()+2,y=f.getFullYear(),b=new Date(Date.UTC(y,g,_)).toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),S=document.createElement("P");S.classList.add("fecha_parrafo_i"),S.innerHTML=" <span>ENTRADA:</span> "+h;const E=document.createElement("P");E.classList.add("fecha_parrafo_e"),E.innerHTML="<span>SALIDA:</span> "+b;const L=document.createElement("P");L.classList.add("adultos_parrafo"),L.innerHTML=`<span>ADULTOS: </span>(${c})`;const I=document.createElement("P");I.classList.add("ninos_parrafo"),I.innerHTML=`<span>NIÑOS: </span>(${i})`,a.appendChild(S),a.appendChild(E),a.appendChild(L),a.appendChild(I),a.appendChild(l),t.appendChild(d)}function uuidv4(){return"xxxxxxxxxxxx4xxx".replace(/[x]/g,(function(){return Math.floor(10*Math.random())}))}async function reservarHabitacion(){const{fecha_i:e,fecha_e:t,solicitudes:a,cantidad:n,monto:o,opcion_pago:i,adultos:c,ninos:s,hora_ll:r,habitaciones:l,habitaciones_re:d,id:u,codigo:m,status:p,imagen:v,traslado:h}=reserva,f=uuidv4(),g=l.map(e=>e.id),_=document.getElementById("traslado").checked;console.log(g);const y=new FormData,b=document.getElementById("imagen_reserva");if(y.append("usuarios_id",u),y.append("fecha_i",e),y.append("cantidad",n),y.append("fecha_e",t),y.append("monto",o),y.append("solicitudes",a),y.append("opcion_pago",i),y.append("adultos",c),y.append("ninos",s),y.append("hora_ll",r),y.append("codigo",f),y.append("status",p),"Transferencia"===i||"Bank of america"===i?(reserva.imagen=b.files[0],y.append("imagen",reserva.imagen)):(reserva.imagen="ninguna",y.append("imagen",reserva.imagen)),y.append("traslado",_),reserva.traslado=_,console.log(y),d.forEach(e=>{y.append(`habitaciones[${e.id_habitacion}][id]`,e.id_habitacion),y.append(`habitaciones[${e.id_habitacion}][cantidad_d]`,e.cantidad_d),y.append(`habitaciones[${e.id_habitacion}][cantidad_s]`,e.cantidad_s)}),console.log(reserva),reserva.codigo=f,Object.entries(reserva).filter(([e,t])=>"solicitudes"!==e&&(""===t||null==t)).length>0||0===reserva.habitaciones.length)Swal.fire({icon:"error",title:"Error",text:"Por favor complete todos los campos primero"});else try{const e=location.origin+"/api/reservas",t=await fetch(e,{method:"POST",body:y}),a=await t.json();console.log(a),a.resultado&&Swal.fire({icon:"success",title:"Reserva enviada",text:"Su reserva fue registrada correctamente",button:"OK"}).then(()=>{setTimeout(()=>{paso=3,mostrarSeccion()},3e3)})}catch(e){Swal.fire({icon:"error",title:"Error",text:"Hubo un error al guardar la reserva"})}}function mostrarAlerta(e,t,a,n=!0){const o=document.querySelector(".alerta");o&&o.remove();const i=document.createElement("DIV");i.textContent=e,i.classList.add("alerta"),i.classList.add(t);document.querySelector(a).appendChild(i),n&&setTimeout(()=>{i.remove()},3e3)}function tabs(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",(function(e){paso=parseInt(e.target.dataset.paso),2===paso&&reserva_cant.cant!==parseInt(reserva.cantidad)||3===paso&&reserva_cant.cant!==parseInt(reserva.cantidad)?(paso=1,mostrarSeccion(),Swal.fire({icon:"info",title:"Seleccione las habitaciones",text:`Por favor, seleccione las (${reserva.cantidad}) habitaciones para habilitar el paso 2`})):2===paso?(mostrarResumen(),mostrarSeccion()):1===paso&&mostrarSeccion()}))})}function paginaAnterior(){document.querySelector("#anterior").addEventListener("click",(function(){paso<=1||paso--}))}function paginaSiguiente(){document.querySelector("#siguiente").addEventListener("click",(function(){paso>=3||paso++}))}function botonesPaginas(){const e=document.querySelector("#anterior"),t=document.querySelector("#siguiente");1===paso?(e.classList.add("ocultar2"),t.classList.remove("ocultar2")):3===paso?(mostrarResumen(),e.classList.remove("ocultar2"),t.classList.add("ocultar2")):(e.classList.remove("ocultar2"),t.classList.remove("ocultar2")),mostrarSeccion()}function limitarCaracteres(){document.querySelectorAll(".descripcion").forEach(e=>{var t=e.innerHTML;if(t.length>100){var a=t.slice(0,100)+"...";e.innerHTML=a}})}function limitarCaracteres2(){document.querySelectorAll(".descripcion2")&&document.querySelectorAll(".descripcion2").forEach(e=>{var t=e.innerHTML;if(t.length>15){var a=t.slice(0,15)+"...";e.innerHTML=a}})}function toggleLista(){document.querySelector(".counter-list").classList.toggle("no-display")}function incrementar(e){let t=document.getElementById(e),a=document.getElementById("adultos2"),n=document.getElementById("habitaciones3"),o=parseInt(t.value);"habitaciones3"===e?(a.value=o+1,n.value=o+1):t.value=o+1,asignarValores()}function incrementar2(e){let t=document.getElementById(e),a=document.getElementById("adultos"),n=document.getElementById("habitaciones2"),o=parseInt(t.value);"habitaciones2"===e?(a.value=o+1,n.value=o+1):t.value=o+1,asignarValores2()}function incrementar3(e){let t=document.getElementById(e);t.value=parseInt(t.value)+1}function decrementar3(e){let t=document.getElementById(e);t.value>0&&(t.value=parseInt(t.value)-1)}function decrementar(e){var t=document.getElementById(e),a=parseInt(t.value);(a>1&&("habitaciones3"===e||"adultos2"===e)||a>0&&"ninos2"===e)&&(t.value=a-1,asignarValores())}function decrementar2(e){var t=document.getElementById(e),a=parseInt(t.value);(a>1&&("habitaciones2"===e||"adultos"===e)||a>0&&"ninos"===e)&&(t.value=a-1,asignarValores2())}function asignarValores(){var e=document.getElementById("btnEnviar3"),t=document.getElementById("detalleReserva"),a=document.getElementById("habitaciones3"),n=document.getElementById("adultos2"),o=document.getElementById("ninos2"),i=document.getElementById("fechaReserva2"),c=document.getElementById("fechaEgreso2");let s=document.getElementById("id_usuario_valor");e.onclick=function(){0!==parseInt(a.value)&&0!==parseInt(n.value)&&""!==i.value&&""!==c.value&""!==s.value?(t.innerHTML=`${n.value} adultos · ${o.value} niños · ${a.value} habitaciones`,e.href=`/habitaciones_s?adultos=${n.value}&ninos=${o.value}&habitaciones=${a.value}&fechaEgreso=${c.value}&fechaReserva=${i.value}`):Swal.fire({icon:"error",title:"Error",text:"Completa todos los campos y recuerde iniciar sesion primero"})}}function asignarValores2(){var e=document.getElementById("habitaciones2"),t=document.getElementById("adultos"),a=document.getElementById("ninos");document.getElementById("fechaReserva"),document.getElementById("fechaEgreso");reserva.adultos=t.value,reserva.ninos=a.value,reserva.cantidad=e.value}function eventListeners(){if(document.querySelectorAll('input[name="contacto[contactar]"]')){document.querySelectorAll('input[name="contacto[contactar]"]').forEach(e=>e.addEventListener("click",mostrarMetodosContacto))}if(document.querySelectorAll('input[name="m_pago"]')){document.querySelectorAll('input[name="m_pago"]').forEach(e=>e.addEventListener("click",mostrarMetodosPago))}}function mostrarMetodosContacto(e){const t=document.querySelector("#contacto");"telefono"===e.target.value?t.innerHTML='\n\t<label for="telefono">Numero de teléfono</label>\n\t<input type="tel" placeholder="Tu Teléfono" id="telefono" name="contacto[telefono]" required>\n\t\n\t<p>Elija la fecha y la hora para la llamada:</p>\n  \n\t<label for="fecha">Fecha:</label>\n\t<input type="date" id="fecha" name="contacto[fecha]">\n  \n\t<label for="hora">Hora:</label>\n\t<input type="time" id="hora" min="08:00" max="20:00" name="contacto[hora]">\n\t':t.innerHTML='\n\t<label for="email">E-mail</label>\n\t<input type="email" placeholder="Tu Email" id="email" name="contacto[email]" required>'}function mostrarMetodosPago(e){const t=document.querySelector("#pago");if("Transferencia"===e.target.value){t.innerHTML='\n\t<p>Datos para la transferencia:</p>\n\t<p class="datos_banco">Banco de Venezuela <br> 01020102128192812 <br> J-0129210912 <br> Hotel RosaBela & Convention Center <br> </p>\n\t\n\t<p>Inserte la imagen del comprobante de pago </p>\n\t<label for="imagen_reserva" class="custom-file-upload" id="file-label">\n    Subir Imagen\n\t</label>\n\t<input type="file" id="imagen_reserva" accept="image/jpeg, image/png" name="reserva[imagen]" required style="display: none;">\n\t';const e=document.getElementById("imagen_reserva"),a=document.getElementById("file-label");console.log("prueba emi"),e.addEventListener("change",(function(){e.files.length>0?(a.textContent=e.files[0].name,console.log(e.files[0].name)):a.textContent="Subir Imagen"}))}else if("Bank of America"===e.target.value){t.innerHTML='\n\t<p>Datos para el Bank of America:</p>\n\t<p class="datos_banco">Banco de Venezuela <br> 01020102128192812 <br> J-0129210912 <br> Hotel RosaBela & Convention Center <br> </p>\n\t<p>Inserte la imagen del comprobante de pago </p>\n\t<label for="imagen_reserva" class="custom-file-upload" id="file-label">\n    Subir Imagen\n\t</label>\n\t<input type="file" id="imagen_reserva" accept="image/jpeg, image/png" name="reserva[imagen]" required style="display: none;">';const e=document.getElementById("imagen_reserva"),a=document.getElementById("file-label");console.log("prueba emi"),e.addEventListener("change",(function(){e.files.length>0?(a.textContent=e.files[0].name,console.log(e.files[0].name)):a.textContent="Subir Imagen"}))}else"Pagar en el hotel"===e.target.value&&(t.innerHTML="\n\t<p> ¡No te preocupes! cancela en nuestras instalaciones sin costo adicional</p>")}$(document).ready((function(){var e=$(".slider li").length,t=1;for(i=1;i<=e;i++)$(".pagination").append('<li><span class="fa fa-circle"></span></li>');function a(){t>=e?t=1:t++,$(".pagination li").css({color:"#858585"}),$(".pagination li:nth-child("+t+")").css({color:"#24989c"}),$(".slider li").hide(),$(".slider li:nth-child("+t+")").fadeIn()}$(".slider li").hide(),$(".slider li:first").show(),$(".pagination li:first").css({color:"#24989c"}),$(".pagination li").click((function(){var e=$(this).index()+1;$(".slider li").hide(),$(".slider li:nth-child("+e+")").fadeIn(),$(".pagination li").css({color:"#858585"}),$(this).css({color:"#24989c"}),t=e})),$(".right span").click(a),$(".left span").click((function(){t<=1?t=e:t--;$(".pagination li").css({color:"#858585"}),$(".pagination li:nth-child("+t+")").css({color:"#24989c"}),$(".slider li").hide(),$(".slider li:nth-child("+t+")").fadeIn()})),setInterval((function(){a()}),4e3);var n=$(".slider2 li").length,o=1;for(i=1;i<=n;i++)$(".pagination2").append('<li><span class="fa fa-circle"></span></li>');function c(){o>=n?o=1:o++,$(".pagination2 li").css({color:"#858585"}),$(".pagination2 li:nth-child("+o+")").css({color:"#24989c"}),$(".slider2 li").hide(),$(".slider2 li:nth-child("+o+")").fadeIn()}$(".slider2 li").hide(),$(".slider2 li:first").show(),$(".pagination2 li:first").css({color:"#24989c"}),$(".pagination2 li").click((function(){var e=$(this).index()+1;$(".slider2 li").hide(),$(".slider2 li:nth-child("+e+")").fadeIn(),$(".pagination2 li").css({color:"#858585"}),$(this).css({color:"#24989c"}),o=e})),$(".right2 span").click(c),$(".left2 span").click((function(){o<=1?o=n:o--;$(".pagination2 li").css({color:"#858585"}),$(".pagination2 li:nth-child("+o+")").css({color:"#24989c"}),$(".slider2 li").hide(),$(".slider2 li:nth-child("+o+")").fadeIn()})),setInterval((function(){c()}),4e3);var s=$(".slider3 li").length,r=1;for(i=1;i<=s;i++)$(".pagination3").append('<li><span class="fa fa-circle"></span></li>');function l(){r>=s?r=1:r++,$(".pagination3 li").css({color:"#858585"}),$(".pagination3 li:nth-child("+r+")").css({color:"#24989c"}),$(".slider3 li").hide(),$(".slider3 li:nth-child("+r+")").fadeIn()}$(".slider3 li").hide(),$(".slider3 li:first").show(),$(".pagination3 li:first").css({color:"#24989c"}),$(".pagination3 li").click((function(){var e=$(this).index()+1;$(".slider3 li").hide(),$(".slider3 li:nth-child("+e+")").fadeIn(),$(".pagination3 li").css({color:"#858585"}),$(this).css({color:"#24989c"}),r=e})),$(".right3 span").click(l),$(".left3 span").click((function(){r<=1?r=s:r--;$(".pagination3 li").css({color:"#858585"}),$(".pagination3 li:nth-child("+r+")").css({color:"#24989c"}),$(".slider3 li").hide(),$(".slider3 li:nth-child("+r+")").fadeIn()})),setInterval((function(){l()}),4e3)}));
//# sourceMappingURL=bundle.js.map
