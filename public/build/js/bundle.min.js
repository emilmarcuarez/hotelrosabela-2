AOS.init();let paso=1;const pasoInicial=1,pasoFinal=3,reserva={id:"",fecha_i:"",fecha_e:"",solicitudes:"",monto:"",ninos:"",adultos:"",cantidad:"",opcion_pago:"",hora_ll:"",usuarios_id:"",habitaciones:[],habitaciones_re:[]},re_habitacion={id:"",id_reserva:"",id_habitacion:"",cantidad_d:0,cantidad_s:0};function iniciarApp(){consultarApi(),seleccionarSolicitudes(),seleccionarHora(),seleccionarPago(),mostrarResumen(),idUsuario(),mostrarSeccion(),tabs(),botonesPaginas(),paginaSiguiente(),paginaAnterior()}document.addEventListener("DOMContentLoaded",(function(){eventListeners(),limitarCaracteres(),iniciarApp()}));let modal=document.getElementById("miModal"),flex=document.getElementById("flex"),cerrar=document.getElementById("close");async function consultarApi(){try{const e=new URLSearchParams(window.location.search),n=e.get("habitaciones"),t=e.get("ninos"),a=e.get("adultos"),i=e.get("fechaReserva"),o=e.get("fechaEgreso"),c="http://localhost:3000/api/servicios",s=await fetch(c);mostrarservicio(await s.json(),n,t,a,i,o)}catch(e){console.log(e)}}function mostrarservicio(e,n,t,a,i,o){reserva.fecha_e=o,reserva.fecha_i=i,reserva.cantidad=n,reserva.ninos=t,reserva.adultos=a,console.log(reserva),e.forEach(e=>{const{id:n,imagen:t,nombre:a,descripcion:i,preciocd:o,preciosd:c,adultos:s,ninos:l}=e,r=document.createElement("H5");r.textContent=a;const d=document.createElement("P");d.textContent=i;const u=document.createElement("P");u.textContent=`Hasta ${s} adultos y ${l} niños`;const p=document.createElement("img");p.src="/imagenes_h/"+t;const m=document.createElement("P");m.classList.add("precio-servicio"),m.textContent="USD "+o;document.createElement("P").textContent="USD "+c;const h=document.createElement("DIV");h.classList.add("img_hab"),h.appendChild(p);const f=document.createElement("a");f.href="/habitacion?id="+n,f.appendChild(r),f.target="_blank";const v=document.createElement("DIV");v.classList.add("titulo_info"),v.appendChild(f);const g=document.createElement("DIV");g.classList.add("info_adicional"),g.appendChild(u);const b=document.createElement("DIV");b.classList.add("info_parrafo"),b.appendChild(d);const $=document.createElement("DIV");$.classList.add("info_hab_3"),$.appendChild(v),$.appendChild(g),$.appendChild(b);const E=document.createElement("DIV");E.classList.add("info_hab"),E.appendChild($);const y=document.createElement("DIV");y.classList.add("hab_part2"),y.appendChild(h),y.appendChild(E),y.setAttribute("id","abrir"+n),y.dataset.idServicio=n,y.onclick=function(){seleccionarHabitacion2(e)},document.querySelector("#habitaciones").appendChild(y)})}function seleccionarHabitacion2(e){const{id:n}=e,{nombre:t}=e,{habitaciones:a}=reserva,i={id_reserva:"",id_habitacion:n,cantidad_d:0,cantidad_s:0},o=document.getElementById("modal-body");o.innerHTML="";let c=document.createElement("p");c.textContent="Habitaciones con desayuno incluido:";let s=document.createElement("input");s.type="number",s.addEventListener("input",(function(){i.cantidad_d=parseInt(s.value)||0}));let l=document.createElement("p");l.textContent="Habitaciones sin desayuno";let r=document.createElement("input");r.type="number",r.addEventListener("input",(function(){i.cantidad_s=parseInt(r.value)||0}));const d=document.createElement("DIV");d.classList.add("seleccionar_hab_p"),d.textContent="SELECCIONAR",o.appendChild(c),o.appendChild(s),o.appendChild(l),o.appendChild(r),o.appendChild(d);document.getElementById("abrir"+n);modal.style.display="block",d.onclick=function(){i.cantidad_s=parseInt(r.value),i.cantidad_d=parseInt(s.value);const t=reserva.habitaciones.findIndex(e=>e.id===n);-1!==t&&(reserva.habitaciones_re[t]=i),seleccionarHabitacion(e,i)}}function seleccionarHabitacion(e,n){const{id:t}=e,{nombre:a}=e,{habitaciones:i,habitaciones_re:o}=reserva,c=document.querySelector(`[data-id-servicio="${t}"]`);i.some(e=>e.id===t)?(reserva.habitaciones=i.filter(e=>e.id!==t),reserva.habitaciones_re=o.filter(e=>e.id_habitacion!==t),c.classList.remove("seleccionado")):(reserva.habitaciones=[...i,e],reserva.habitaciones_re=[...o,n],c.classList.add("seleccionado")),mostrarResumen()}function mostrarSeccion(){const e=document.querySelector(".mostrar");e&&e.classList.remove("mostrar");const n="#paso-"+paso;document.querySelector(n).classList.add("mostrar");const t=document.querySelector(".actual");t&&t.classList.remove("actual");document.querySelector(`[data-paso="${paso}"]`).classList.add("actual")}function idUsuario(){reserva.id=document.querySelector("#id").value}function seleccionarSolicitudes(){document.querySelector("#solicitudes").addEventListener("change",(function(e){reserva.solicitudes=e.target.value}))}function seleccionarPago(){document.querySelectorAll('input[name="m_pago"]').forEach(e=>{e.addEventListener("input",(function(e){reserva.opcion_pago=e.target.value}))})}function seleccionarHora(){document.querySelector("#hora").addEventListener("input",(function(e){reserva.hora_ll=e.target.value}))}function mostrarResumen(){const e=document.querySelector(".contenido-resumen");for(;e.firstChild;)e.removeChild(e.firstChild);const{habitaciones:n,habitaciones_re:t}=reserva;console.log(reserva),reserva.monto=0;const a=document.createElement("H3");a.textContent="Resumen de las habitaciones",e.appendChild(a),n.forEach(n=>{console.log(n);const{id:a,imagen:i,nombre:o,descripcion:c,preciocd:s,preciosd:l,adultos:r,ninos:d}=n,u=document.createElement("DIV");u.classList.add("contenedor-habitacion");const p=document.createElement("P");p.textContent=o;const m=document.createElement("P");m.innerHTML="<span>Precio con desayuno:</span> $"+s;const h=document.createElement("P");h.innerHTML="<span>Precio sin desayuno:</span> $"+l,u.appendChild(p),u.appendChild(m),u.appendChild(h),u.appendChild(h),t.forEach(e=>{const{id_habitacion:n,cantidad_d:t,cantidad_s:i}=e;if(parseInt(n)===parseInt(a)){const e=document.createElement("P");e.innerHTML="<span>Habitaciones sin desayuno: </span> "+i;const n=document.createElement("P");n.innerHTML="<span>Habitaciones con desayuno: </span> "+t,reserva.monto=reserva.monto+parseFloat(s)*parseFloat(t),reserva.monto=reserva.monto+parseFloat(l)*parseFloat(i),u.appendChild(e),u.appendChild(n)}}),e.appendChild(u)});const i=document.createElement("p");i.textContent="El monto total es: "+reserva.monto,e.appendChild(i);const o=document.createElement("BUTTON");o.classList.add("boton"),o.textContent="Realizar reserva",o.onclick=reservarHabitacion,e.appendChild(o)}async function reservarHabitacion(){const{fecha_i:e,fecha_e:n,solicitudes:t,cantidad:a,monto:i,opcion_pago:o,adultos:c,ninos:s,hora_ll:l,habitaciones:r,habitaciones_re:d,id:u}=reserva,p=r.map(e=>e.id);console.log(p);const m=new FormData;console.log(m),m.append("usuarios_id",u),m.append("fecha_i",e),m.append("cantidad",a),m.append("fecha_e",n),m.append("monto",i),m.append("solicitudes",t),m.append("opcion_pago",o),m.append("adultos",c),m.append("ninos",s),m.append("hora_ll",l),d.forEach(e=>{m.append(`habitaciones[${e.id_habitacion}][id]`,e.id_habitacion),m.append(`habitaciones[${e.id_habitacion}][cantidad_d]`,e.cantidad_d),m.append(`habitaciones[${e.id_habitacion}][cantidad_s]`,e.cantidad_s)});const h=await fetch("http://localhost:3000/api/reservas",{method:"POST",body:m});await h.json()}function mostrarAlerta(e,n,t,a=!0){const i=document.querySelector(".alerta");i&&i.remove();const o=document.createElement("DIV");o.textContent=e,o.classList.add("alerta"),o.classList.add(n);document.querySelector(t).appendChild(o),a&&setTimeout(()=>{o.remove()},3e3)}function tabs(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",(function(e){paso=parseInt(e.target.dataset.paso),mostrarSeccion(),botonesPaginas(),3===paso&&mostrarResumen()}))})}function paginaAnterior(){document.querySelector("#anterior").addEventListener("click",(function(){paso<=1||(paso--,botonesPaginas())}))}function paginaSiguiente(){document.querySelector("#siguiente").addEventListener("click",(function(){paso>=3||(paso++,botonesPaginas())}))}function botonesPaginas(){const e=document.querySelector("#anterior"),n=document.querySelector("#siguiente");1===paso?(e.classList.add("ocultar2"),n.classList.remove("ocultar2")):3===paso?(mostrarResumen(),e.classList.remove("ocultar2"),n.classList.add("ocultar2")):(e.classList.remove("ocultar2"),n.classList.remove("ocultar2")),mostrarSeccion()}function limitarCaracteres(){document.querySelectorAll(".descripcion").forEach(e=>{var n=e.innerHTML;if(n.length>100){var t=n.slice(0,100)+"...";e.innerHTML=t}})}function toggleLista(){document.querySelector(".counter-list").classList.toggle("no-display")}function incrementar(e){let n=document.getElementById(e),t=document.getElementById("adultos"),a=document.getElementById("habitaciones"),i=parseInt(n.value);"habitaciones"===e||"adultos"===e?(t.value=i+1,a.value=i+1):n.value=i+1,asignarValores()}function decrementar(e){var n=document.getElementById(e),t=parseInt(n.value);(t>1&&("habitaciones"===e||"adultos"===e)||t>0&&"ninos"===e)&&(n.value=t-1,asignarValores())}function asignarValores(){var e=document.getElementById("detalleReserva"),n=document.getElementById("habitaciones"),t=document.getElementById("adultos"),a=document.getElementById("ninos"),i=document.getElementById("fechaReserva"),o=document.getElementById("fechaEgreso"),c=document.getElementById("btnEnviar3");e.innerHTML=`${t.value} adultos · ${a.value} niños · ${n.value} habitaciones`,c.href=`/habitaciones_s?adultos=${t.value}&ninos=${a.value}&habitaciones=${n.value}&fechaEgreso=${o.value}&fechaReserva=${i.value}`}function eventListeners(){document.querySelectorAll('input[name="contacto[contactar]"]').forEach(e=>e.addEventListener("click",mostrarMetodosContacto))}function mostrarMetodosContacto(e){const n=document.querySelector("#contacto");"telefono"===e.target.value?n.innerHTML='\n\t<label for="telefono">Numero de teléfono</label>\n\t<input type="tel" placeholder="Tu Teléfono" id="telefono" name="contacto[telefono]" required>\n\t\n\t<p>Elija la fecha y la hora para la llamada:</p>\n  \n\t<label for="fecha">Fecha:</label>\n\t<input type="date" id="fecha" name="contacto[fecha]">\n  \n\t<label for="hora">Hora:</label>\n\t<input type="time" id="hora" min="08:00" max="20:00" name="contacto[hora]">\n\t':n.innerHTML='\n\t<label for="email">E-mail</label>\n\t<input type="email" placeholder="Tu Email" id="email" name="contacto[email]" required>'}cerrar.addEventListener("click",(function(){modal.style.display="none"})),window.addEventListener("click",(function(e){e.target==flex&&(modal.style.display="none")})),$(document).ready((function(){var e=$(".slider li").length,n=1;for(i=1;i<=e;i++)$(".pagination").append('<li><span class="fa fa-circle"></span></li>');function t(){n>=e?n=1:n++,$(".pagination li").css({color:"#858585"}),$(".pagination li:nth-child("+n+")").css({color:"#24989c"}),$(".slider li").hide(),$(".slider li:nth-child("+n+")").fadeIn()}$(".slider li").hide(),$(".slider li:first").show(),$(".pagination li:first").css({color:"#24989c"}),$(".pagination li").click((function(){var e=$(this).index()+1;$(".slider li").hide(),$(".slider li:nth-child("+e+")").fadeIn(),$(".pagination li").css({color:"#858585"}),$(this).css({color:"#24989c"}),n=e})),$(".right span").click(t),$(".left span").click((function(){n<=1?n=e:n--;$(".pagination li").css({color:"#858585"}),$(".pagination li:nth-child("+n+")").css({color:"#24989c"}),$(".slider li").hide(),$(".slider li:nth-child("+n+")").fadeIn()})),setInterval((function(){t()}),4e3)})),$(document).ready((function(){var e=$(".slider2 li").length,n=1;for(i=1;i<=e;i++)$(".pagination2").append('<li><span class="fa fa-circle"></span></li>');function t(){n>=e?n=1:n++,$(".pagination2 li").css({color:"#858585"}),$(".pagination2 li:nth-child("+n+")").css({color:"#24989c"}),$(".slider2 li").hide(),$(".slider2 li:nth-child("+n+")").fadeIn()}$(".slider2 li").hide(),$(".slider2 li:first").show(),$(".pagination2 li:first").css({color:"#24989c"}),$(".pagination2 li").click((function(){var e=$(this).index()+1;$(".slider2 li").hide(),$(".slider2 li:nth-child("+e+")").fadeIn(),$(".pagination2 li").css({color:"#858585"}),$(this).css({color:"#24989c"}),n=e})),$(".right2 span").click(t),$(".left2 span").click((function(){n<=1?n=e:n--;$(".pagination2 li").css({color:"#858585"}),$(".pagination2 li:nth-child("+n+")").css({color:"#24989c"}),$(".slider2 li").hide(),$(".slider2 li:nth-child("+n+")").fadeIn()})),setInterval((function(){t()}),4e3)})),$(document).ready((function(){var e=$(".slider3 li").length,n=1;for(i=1;i<=e;i++)$(".pagination3").append('<li><span class="fa fa-circle"></span></li>');function t(){n>=e?n=1:n++,$(".pagination3 li").css({color:"#858585"}),$(".pagination3 li:nth-child("+n+")").css({color:"#24989c"}),$(".slider3 li").hide(),$(".slider3 li:nth-child("+n+")").fadeIn()}$(".slider3 li").hide(),$(".slider3 li:first").show(),$(".pagination3 li:first").css({color:"#24989c"}),$(".pagination3 li").click((function(){var e=$(this).index()+1;$(".slider3 li").hide(),$(".slider3 li:nth-child("+e+")").fadeIn(),$(".pagination3 li").css({color:"#858585"}),$(this).css({color:"#24989c"}),n=e})),$(".right3 span").click(t),$(".left3 span").click((function(){n<=1?n=e:n--;$(".pagination3 li").css({color:"#858585"}),$(".pagination3 li:nth-child("+n+")").css({color:"#24989c"}),$(".slider3 li").hide(),$(".slider3 li:nth-child("+n+")").fadeIn()})),setInterval((function(){t()}),4e3)}));
//# sourceMappingURL=bundle.js.map
